{"version":3,"file":"CustomizableRenderers.lazy-BUTyotlO.js","sources":["../../website/routes/CustomizableRenderers.lazy.tsx"],"sourcesContent":["import { useMemo, useState } from 'react';\nimport { createLazyFileRoute } from '@tanstack/react-router';\nimport { css } from '@linaria/core';\n\nimport DataGrid, { SelectColumn, textEditor } from '../../src';\nimport type { Column, RenderCheckboxProps, RenderSortStatusProps, SortColumn } from '../../src';\nimport { useDirection } from '../directionContext';\n\nexport const Route = createLazyFileRoute('/CustomizableRenderers')({\n  component: CustomizableRenderers\n});\n\nconst selectCellClassname = css`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  > input {\n    margin: 0;\n  }\n`;\n\nconst sortPriorityClassname = css`\n  color: grey;\n  margin-left: 2px;\n`;\n\ninterface Row {\n  id: number;\n  task: string;\n  complete: number;\n  priority: string;\n  issueType: string;\n}\n\nfunction createRows(): readonly Row[] {\n  const rows: Row[] = [];\n\n  for (let i = 1; i < 500; i++) {\n    rows.push({\n      id: i,\n      task: `Task ${i}`,\n      complete: Math.min(100, Math.round(Math.random() * 110)),\n      priority: ['Critical', 'High', 'Medium', 'Low'][Math.round(Math.random() * 3)],\n      issueType: ['Bug', 'Improvement', 'Epic', 'Story'][Math.round(Math.random() * 3)]\n    });\n  }\n\n  return rows;\n}\n\nconst columns: readonly Column<Row>[] = [\n  {\n    ...SelectColumn,\n    headerCellClass: selectCellClassname,\n    cellClass: selectCellClassname\n  },\n  {\n    key: 'id',\n    name: 'ID',\n    width: 80\n  },\n  {\n    key: 'task',\n    name: 'Title',\n    renderEditCell: textEditor,\n    sortable: true\n  },\n  {\n    key: 'priority',\n    name: 'Priority',\n    sortable: true\n  },\n  {\n    key: 'issueType',\n    name: 'Issue Type',\n    sortable: true\n  },\n  {\n    key: 'complete',\n    name: '% Complete',\n    sortable: true\n  }\n];\n\nfunction CustomizableRenderers() {\n  const direction = useDirection();\n  const [rows, setRows] = useState(createRows);\n  const [sortColumns, setSortColumns] = useState<readonly SortColumn[]>([]);\n  const [selectedRows, setSelectedRows] = useState((): ReadonlySet<number> => new Set());\n\n  const sortedRows = useMemo((): readonly Row[] => {\n    if (sortColumns.length === 0) return rows;\n\n    return [...rows].sort((a, b) => {\n      for (const sort of sortColumns) {\n        const comparator = getComparator(sort.columnKey);\n        const compResult = comparator(a, b);\n        if (compResult !== 0) {\n          return sort.direction === 'ASC' ? compResult : -compResult;\n        }\n      }\n      return 0;\n    });\n  }, [rows, sortColumns]);\n\n  return (\n    <DataGrid\n      className=\"fill-grid\"\n      columns={columns}\n      rows={sortedRows}\n      rowKeyGetter={rowKeyGetter}\n      onRowsChange={setRows}\n      sortColumns={sortColumns}\n      onSortColumnsChange={setSortColumns}\n      selectedRows={selectedRows}\n      onSelectedRowsChange={setSelectedRows}\n      renderers={{ renderSortStatus, renderCheckbox }}\n      direction={direction}\n    />\n  );\n}\n\nfunction renderCheckbox({ onChange, indeterminate, ...props }: RenderCheckboxProps) {\n  function handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n    onChange(e.target.checked, (e.nativeEvent as MouseEvent).shiftKey);\n  }\n\n  return (\n    <input\n      ref={(el) => {\n        if (el) {\n          el.indeterminate = indeterminate === true;\n        }\n      }}\n      type=\"checkbox\"\n      {...props}\n      onChange={handleChange}\n    />\n  );\n}\n\nfunction renderSortStatus({ sortDirection, priority }: RenderSortStatusProps) {\n  return (\n    <>\n      {sortDirection !== undefined ? (sortDirection === 'ASC' ? '\\u2B9D' : '\\u2B9F') : null}\n      <span className={sortPriorityClassname}>{priority}</span>\n    </>\n  );\n}\n\nfunction rowKeyGetter(row: Row) {\n  return row.id;\n}\n\ntype Comparator = (a: Row, b: Row) => number;\n\nfunction getComparator(sortColumn: string): Comparator {\n  switch (sortColumn) {\n    case 'task':\n    case 'priority':\n    case 'issueType':\n      return (a, b) => {\n        return a[sortColumn].localeCompare(b[sortColumn]);\n      };\n    case 'complete':\n      return (a, b) => {\n        return a[sortColumn] - b[sortColumn];\n      };\n    default:\n      throw new Error(`unsupported sortColumn: \"${sortColumn}\"`);\n  }\n}\n"],"names":["Route","createLazyFileRoute","component","CustomizableRenderers","selectCellClassname","sortPriorityClassname","createRows","rows","i","push","id","task","complete","Math","min","round","random","priority","issueType","columns","SelectColumn","headerCellClass","cellClass","key","name","width","renderEditCell","textEditor","sortable","direction","useDirection","setRows","useState","sortColumns","setSortColumns","selectedRows","setSelectedRows","Set","sortedRows","useMemo","length","sort","a","b","compResult","getComparator","columnKey","jsx","DataGrid","className","rowKeyGetter","onRowsChange","onSortColumnsChange","onSelectedRowsChange","renderers","renderSortStatus","renderCheckbox","onChange","indeterminate","props","handleChange","e","target","checked","nativeEvent","shiftKey","ref","el","type","sortDirection","jsxs","Fragment","children","row","sortColumn","localeCompare","Error"],"mappings":"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"}