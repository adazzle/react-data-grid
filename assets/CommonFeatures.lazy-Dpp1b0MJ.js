const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-DfSdHBpe.js","assets/index-BEOpTcXj.js","assets/index-B8l4d-uO.css","assets/jspdf.plugin.autotable-D1M_2geP.js","assets/_commonjsHelpers-BosuxZz1.js"])))=>i.map(i=>d[i]);
import{_ as w,c as T,u as F,r as c,j as a,a as d,f as i}from"./index-BEOpTcXj.js";import{t as u,a as _}from"./textEditor-_lyuWuww.js";import{D as A,l as D,m as M}from"./DataGrid-CMuhyPuE.js";function P(t,r){const{head:e,body:n,foot:o}=x(t),s=[...e,...n,...o].map(m=>m.map(L).join(",")).join(`
`);I(r,new Blob([s],{type:"text/csv;charset=utf-8;"}))}async function z(t,r){const{head:e,body:n,foot:o}=x(t),[{jsPDF:s},{default:m}]=await Promise.all([w(()=>import("./jspdf.es.min-DfSdHBpe.js").then(l=>l.j),__vite__mapDeps([0,1,2])),w(()=>import("./jspdf.plugin.autotable-D1M_2geP.js").then(l=>l.j),__vite__mapDeps([3,4,0,1,2]))]),p=new s({orientation:"l",unit:"px"});m(p,{head:e,body:n,foot:o,horizontalPageBreak:!0,styles:{cellPadding:1.5,fontSize:8,cellWidth:"wrap"},tableWidth:"wrap"}),p.save(r)}function x(t){return{head:r(".rdg-header-row"),body:r(".rdg-row:not(.rdg-summary-row)"),foot:r(".rdg-summary-row")};function r(e){return Array.from(t.querySelectorAll(e)).map(n=>Array.from(n.querySelectorAll(".rdg-cell")).map(o=>o.innerText))}}function L(t){if(typeof t=="string"){const r=t.replace(/"/g,'""');return r.includes(",")?`"${r}"`:r}return t}function I(t,r){const e=document.createElement("a");e.download=t;const n=URL.createObjectURL(r);e.href=n,e.click(),URL.revokeObjectURL(n)}const Q=T("/CommonFeatures")({component:K}),N="t1sn5bov",V="d53963l",b=new Intl.DateTimeFormat(navigator.language),O=new Intl.NumberFormat(navigator.language,{style:"currency",currency:"eur"});function $(t,r){return[D,{key:"id",name:"ID",frozen:!0,resizable:!1,renderSummaryCell(){return a.jsx("strong",{children:"Total"})}},{key:"title",name:"Task",frozen:!0,renderEditCell:u,renderSummaryCell({row:e}){return`${e.totalCount} records`}},{key:"client",name:"Client",width:"max-content",draggable:!0,renderEditCell:u},{key:"area",name:"Area",renderEditCell:u},{key:"country",name:"Country",renderEditCell:e=>a.jsx("select",{autoFocus:!0,className:_,value:e.row.country,onChange:n=>e.onRowChange({...e.row,country:n.target.value},!0),children:t.map(n=>a.jsx("option",{children:n},n))})},{key:"contact",name:"Contact",renderEditCell:u},{key:"assignee",name:"Assignee",renderEditCell:u},{key:"progress",name:"Completion",renderCell(e){const n=e.row.progress;return a.jsxs(a.Fragment,{children:[a.jsx("progress",{max:100,value:n,style:{inlineSize:50}})," ",Math.round(n),"%"]})},renderEditCell({row:e,onRowChange:n,onClose:o}){return d.createPortal(a.jsx("div",{dir:r,className:V,onKeyDown:s=>{s.key==="Escape"&&o()},children:a.jsxs("dialog",{open:!0,children:[a.jsx("input",{autoFocus:!0,type:"range",min:"0",max:"100",value:e.progress,onChange:s=>n({...e,progress:s.target.valueAsNumber})}),a.jsxs("menu",{children:[a.jsx("button",{type:"button",onClick:()=>o(),children:"Cancel"}),a.jsx("button",{type:"button",onClick:()=>o(!0),children:"Save"})]})]})}),document.body)},editorOptions:{displayCellContent:!0}},{key:"startTimestamp",name:"Start date",renderCell(e){return b.format(e.row.startTimestamp)}},{key:"endTimestamp",name:"Deadline",renderCell(e){return b.format(e.row.endTimestamp)}},{key:"budget",name:"Budget",renderCell(e){return O.format(e.row.budget)}},{key:"transaction",name:"Transaction type"},{key:"account",name:"Account"},{key:"version",name:"Version",renderEditCell:u},{key:"available",name:"Available",renderCell({row:e,onRowChange:n,tabIndex:o}){return a.jsx(M,{value:e.available,onChange:()=>{n({...e,available:!e.available})},tabIndex:o})},renderSummaryCell({row:{yesCount:e,totalCount:n}}){return`${Math.floor(100*e/n)}% ✔️`}}]}function U(t){return t.id}let v=[];function B(){const t=Date.now(),r=[],e=new Set;for(let n=0;n<1e3;n++){const o=i.location.country();e.add(o),r.push({id:n,title:`Task #${n+1}`,client:i.company.name(),area:i.person.jobArea(),country:o,contact:i.internet.exampleEmail(),assignee:i.person.fullName(),progress:Math.random()*100,startTimestamp:t-Math.round(Math.random()*1e10),endTimestamp:t+Math.round(Math.random()*1e10),budget:500+Math.random()*10500,transaction:i.finance.transactionType(),account:i.finance.iban(),version:i.system.semver(),available:Math.random()>.5})}return v=[...e].sort(new Intl.Collator().compare),r}function G(t){switch(t){case"assignee":case"title":case"client":case"area":case"country":case"contact":case"transaction":case"account":case"version":return(r,e)=>r[t].localeCompare(e[t]);case"available":return(r,e)=>r[t]===e[t]?0:r[t]?1:-1;case"id":case"progress":case"startTimestamp":case"endTimestamp":case"budget":return(r,e)=>r[t]-e[t];default:throw new Error(`unsupported sortColumn: "${t}"`)}}function K(){const t=F(),[r,e]=c.useState(B),[n,o]=c.useState([]),[s,m]=c.useState(()=>new Set),[p,l]=c.useState(!1),y=c.useRef(null),S=c.useMemo(()=>$(v,t),[t]),h=c.useMemo(()=>[{id:"total_0",totalCount:r.length,yesCount:r.filter(f=>f.available).length}],[r]),j=c.useMemo(()=>n.length===0?r:[...r].sort((f,R)=>{for(const C of n){const g=G(C.columnKey)(f,R);if(g!==0)return C.direction==="ASC"?g:-g}return 0}),[r,n]);function E(){d.flushSync(()=>{l(!0)}),P(y.current.element,"CommonFeatures.csv"),d.flushSync(()=>{l(!1)})}async function k(){d.flushSync(()=>{l(!0)}),await z(y.current.element,"CommonFeatures.pdf"),d.flushSync(()=>{l(!1)})}return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:N,children:[a.jsx("button",{type:"button",onClick:E,children:"Export to CSV"}),a.jsx("button",{type:"button",onClick:k,children:"Export to PDF"})]}),a.jsx(A,{ref:y,rowKeyGetter:U,columns:S,rows:j,defaultColumnOptions:{sortable:!0,resizable:!0},selectedRows:s,onSelectedRowsChange:m,onRowsChange:e,sortColumns:n,onSortColumnsChange:o,topSummaryRows:h,bottomSummaryRows:h,className:"fill-grid",direction:t,enableVirtualization:!p})]})}export{Q as Route};
//# sourceMappingURL=CommonFeatures.lazy-Dpp1b0MJ.js.map
